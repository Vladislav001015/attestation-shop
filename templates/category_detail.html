{% extends 'list.html' %}
{% load static %}
{% block content %}

        <h1 style="font-size: 45px; color: #333333; margin-bottom: 0px;     text-align: center;" > Категория: {{ category.name }}</h1>

        {% if category.get_children %}
        <h1 style="font-size: 30px; color: #333333; margin-bottom: 0px;" >  Подкатегории:</h1>
<ul>
    <hr style="background-color: red;">
                {% for child in category.get_children %}
                    <a href="{% url 'category' child.id %}" style="text-decoration: none; "><li style="font-size: 20px; color: #333333;     margin-left: 25px;">{{ child.name }}</li></a>
    <hr style="background-color: red;">
                {% endfor %}
</ul>

    <section class="catalog">
        <div class="wrapper">
            <div class="grid">

                <div class="grid-item grid-item-title">
                    <h1>Каталог по категории: {{ category.name  }} </h1>
                </div>
                        {% for p in products %}
                        <div class="grid-item grid-item-catalog">
                                            <div class="bg-white" style="pading:10px">
                                                <div class="thumb">
                                                    <img src=" /media/{{ p.image }}" style="width: 250px; height:250px;" alt="Photo">
                                                </div>

                                                <p class="grid-first_title" style="margin-bottom: 0;">{{ p.title }}</p>
                                                <p class="grid-title" style="margin-bottom: 0;">{{ p.descriptions|truncatewords:10 }}</p>
                                                <p class="grid-title" style="margin-bottom: 0;">Цена: {{ p.price }}$</p>
                                                <p class="grid-title" style="margin-bottom: 0;">Категория: {{ p.category }}</p>


                                                <a style="text-align:center; text-decoration: none; color: brown; font-size: 20px; margin-left: 145px;" href="{% url 'detail' p.id %}">Подробней</a>
                                                <hr style="background-color: red;">


                                                <p style="margin-bottom: 0;">Нравится: {{ p.likes.all|length }} </p>


                                                <hr style="background-color: red;">
                                                <div style="display: flex; justify-content: space-between;">
                                                <a style="text-align:center; text-decoration: none; color: red; font-size: 20px;" href="{% url 'product_update' p.id %}">Изменить</a>

                                                <a style="text-align:center; text-decoration: none; color: red; font-size: 20px;;" href="{% url 'product_delete' p.id %}">Удалить</a>
                                                </div>
                                            </div>
                                        </div>



                        {% endfor %}

                        </div>

            </div>
        </section>




        {% endif %}

        {% if not category.get_children %}

    <section class="catalog">
        <div class="wrapper">
            <div class="grid">

                <div class="grid-item grid-item-title">
                    <h1>Каталог по категории: {{ category.name  }} </h1>
                </div>
                        {% for p in products %}
                        <div class="grid-item grid-item-catalog">
                                            <div class="bg-white" style="pading:10px">
                                                <div class="thumb">
                                                    <img src=" /media/{{ p.image }}" style="width: 250px; height:250px;" alt="Photo">
                                                </div>

                                                <p class="grid-first_title" style="margin-bottom: 0;">{{ p.title }}</p>
                                                <p class="grid-title" style="margin-bottom: 0;">{{ p.descriptions|truncatewords:10 }}</p>
                                                <p class="grid-title" style="margin-bottom: 0;">Цена: {{ p.price }}$</p>
                                                <p class="grid-title" style="margin-bottom: 0;">Категория: {{ p.category }}</p>


                                                <a style="text-align:center; text-decoration: none; color: brown; font-size: 20px; margin-left: 145px;" href="{% url 'detail' p.id %}">Подробней</a>
                                                <hr style="background-color: red;">


                                                <p style="margin-bottom: 0;">Нравится: {{ p.likes.all|length }} </p>


                                                <hr style="background-color: red;">
                                                <div style="display: flex; justify-content: space-between;">
                                                <a style="text-align:center; text-decoration: none; color: red; font-size: 20px;" href="{% url 'product_update' p.id %}">Изменить</a>

                                                <a style="text-align:center; text-decoration: none; color: red; font-size: 20px;;" href="{% url 'product_delete' p.id %}">Удалить</a>
                                                </div>
                                            </div>
                                        </div>



                        {% endfor %}

                        </div>

            </div>
        </section>

        {% endif %}



{% endblock %}